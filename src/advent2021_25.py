inp = """.>.>.......v.v.....vvv>..v...>>>.>.v.>.v....>.v.vv.>..>.>>>.....v...>..>v..v.>>.>v>vv.>v.v>v>.>>>.>>>vvv.v>.v>>>.........vv.v.v>>.v>v>v..v.
vv.....vvv.>.vv.vv.v..v..v>.>..v..v>>>..v.v.v>.>vvvv.>....v...>>.>..>>v.v>>v>>.>..v..>>>.>>.>.>.>v...vv.vv.>.>>>..v..>v>v>>...>v...v>>v>..v
..v>v.>.v..v.>>.>>.v>.>>..v>..v>>..>...vvv>.>>v>..>.vv.....>.v.>........>...>.>.>v>v.v.vv.v.>vvv>...v>>...>v>.>>.....>>v.v.v.v>>.v.v..>>.v>
.>>.v>.vvv....v.v..v>..>vv..v.>..v..>.v>>.v>>..>>.......>vv..v.v.>>..v..v>.>.>.>vv..v...>..>>.vvv>..>..>vvv.v.v...v....v.....vv.>v.vv.v.v..
v>>.v>.v....vvv>.v.v.v>v.vvvv.....vvv>......v>>v.vvv>vvv.vv.>v..v.vv.v>v....>...v>>..>..>>..>.v....>v.>vv..v..>.>>vv>..>.>..v....>.....v>v>
....>>>..>........v.v.>..>v.v.vv.>.>..v>.v.>>.>...>.....v>.>>..vv.>.v..vv.vvvvv>>v..>.>>..v..vvvv>.vv.vvv>>>.>>...v>>.v>..v..vv.>.>.v...>>.
.v.>vv..v.vv.>>.>.>.>..v..v.>.v.v.>.>..v.>v..>..>>.v>.>..>>.>...>>..vv.>>>..>>...>v>.>v.vv.v>....v..>....>v........>>.>>.>...>..>v>.v.vvv>.
..>v.v.v.v.>>..>..>v>.>.v..v>..>...v.>>v....v.>>.>>>>>v....vvv.>>v>........v>.>vv....>..v..vv>>........v.v..>vv>>>..v..vvv.v>.>>>.>v>.>..>>
...>>...v...vvv.v.>....v.v.v>>vv...>v.>.v.v...v>..vv>v...>v>.>v.>v.>>....v..>..v>..>vv>>>v.v>>v.....v>.....>>>...>>>.vv.v.>..v.v>.>>>.>vvvv
...>v.v.>>>..>.......>...vv..v..>>>v.v...>>.v>.vv..>...>vv>>..>.v>vv......v>>>..>.vv>>>..vv.>v>..>...>>...v>vv>v..v.>>v....>..vv....vv.>..>
.v.>v......>>.v..>...>.v..v.>.v.>..>.......>>.v..>>.>v.>...v>>v.v.>..v..>>>v..v..v...v..v>.v.>.>>..>>v>.>.v..v.>>...>>>...v.>.>..vv....>...
...>>..v.v..>>>..v>>>v....>>>>...>v....v....>v>.......v....v..>.>>>>.>.>>.v..v.>.>>>vv>v>v..vvv....v........vv>v.....v.v>>>>v.>....v....>..
..v.>...>..vv..>>.>..>v.>..vvv>.v.>..>>>>..>....>>>>>..vvv...vv>.>..>..>>.vv.>v.v>.>v>.>.>>v>..>..>..>>.v...>vv>>vv.v..>.v.....>vv..v...v.v
.v.>....>..>.>>vv.>>vv.v>v>...v.v>..>>v.>...>.vv.v.>v..>>v>>>v>.vv.vv.>>>v.>vv..v>..>...>>....>.v...>>.v>.....>...v.>v..>>.....>>v>>..v.v.v
>.>...>v.v...v.....>..v.>....v>v>..>....v...>>v>v.vvv.>>..>.>v.vvv..v>>vv>v>>..>.>..v>..>..v>..>.v..v>..>.vv>.>vv...>>.>.>>>.>..>>v>...vv.v
v...>.>...>>v.vv>v>>.>..>.>>.....>v.vvv.>>>.>v...v..v.>.v>>>....v.>.......v.vv..>.v>.v.v..>>>.vv>>v>>v>.>.>v.>..vv...>>.>.v..v>>>.vvvv>>v>.
..>>.v.>..vvvvv>.>.v.v.>...>>>...v>.>...>vv..>>....v....>>v...>v>.>vv>>v...vvv..vv.vvv..>>v.vvvvv>>..>.>>>.vv>v....>v.>.>...>.vvv.>vv.>>v>>
.v....v.....vv....>.>...>..v.v>>.>>v>vv.>.>.>...v>.>.....v......v>v.v..v.v>..v...>..>..>..v.vvv.......>>..v>..v..>.vv>...v.v..>.vv.>>.>....
>vv>.>....v>.>v.>..>>>>v..>v>..v....v>.....v.>v.....>...v.>v..>.....vv...>.>v.>vv..v.>v....v>.vvvv....>v>>.v>>.vv.v>.>...v.vvv>....>.vv..>.
v..v>.v.v..v>>...v>>v..v>v>.v>v>>..>>>vvvv........>>..>.>vv..v..v.vvv>.v>>.>..>.>>.....>....>>....>.>.vv...>.>v.>.v>..>.v.>...>.>>..>..>...
...>>.v..>.>.v>>>>>v.v..v.v..>>>v>v>.v>>>.>>>>..v>.v>>v>>..>v>>>.v.>vv....vv>v.>......vv>.>.>..>vvv.>.>v>>>..v>>..vvv>.>..>vv>.v.v>.vv.v.>>
>.>v.v.v>>.>..>v...v.vv.>v..v>>vv.v>>.>...>>...>>.>>...v...vv.>.>..v>.....>...v>>..v..>v.>>>>vv...>..>.vv>v..>>vvv...v.v..>.>.vv..>>..>v>.v
.>v.vv.v>..v>v..>..v.>vv..>..>>.>v>.....>....v.v.>..v.v.v>v...v....vvvvv.v>v.v.v...>>>>vvv...v......>..>v>.>..vv>vv>vv..v>>..>.>>.>.v.>.v.v
..>>.v.>..>...vvv.....v>>..>>..>v..v...v..>>.v.v.vv..v>>>>>vvv..vv..>>>v..>..vv>>>>v.v>...v....v>>.vv>>v>>.>...>..v>.....>v.>.vv..>.vv>v>v>
..>.vv.>.>...>v>v..v.>>....>.>vv.>v>.>.>..>..>v....v.v..>..v.v....>.>.>>.>v.>...v>>vv.>vv..>.>vv.....vv.vvv.......v...v...>>..v.>.v>.>.>.vv
.>.v>.vv.....v>>vv..v..v.>>.>.>...vv>..>>..>>v..v>>>v>>..>.v.>v>>>.>v..>.v...>.v.>...>>..>>v.v.v.>>v..>v..>vvv.......>>v...v>v...vv>v>>v>v>
.>v.v.v....>..v.>>>.v>.>vv..>.v.v.>..vv...>>.....>vv>..v>....v..vvv.......v..>.vv>v>v>..>.vv.>v...>.v>...v...vv>..>..v.>v..>vv.v..v>..>.>>>
v.>...>vvvv.>v>.>..>>.>v.vv.v..vv>>>.v...>>vv>..>..v>v.>...>vv..v>v>>v.......>.v>.>v>>v.>>.>v.v>.vv....v...>.>...v...vv.>vv.>v.....v...v>vv
..>v...>...v>v.>..>...vv.>vv>>v..>vv>v...v...>...vv...>.vv.>v>.>.v>>>>.v.>v.v>.>>v.......v..v>v..>>......>>>v.>.....vvv>.>>.v>v.>..>vv.>.v.
>v..>.>.>v>..>.>.v.>...>vv>..v...v>v.v.>...>.v...>.>>v.>....>.>>..vv..v..>>>>.v.>>vvv.v..>..vv.....>...v.v.v.v.>>..vvv.vvv.>......v.vv.>..>
...vv..>vv.>>v...vvv.v.>>vv>..v>vv>>>...v..>...v>..v..>...>.>vvvvv..v.v>>.v.>v>..>>v..>.>.>>vv.v>>>.v>v.>.>..v........v>..>.v...v.v>>>>v>>.
v.v>.vv>v>...v.>>..v...>...>.>>>>.>.v.>>....vv..v>v>.>v.>vv>.v>.....v>.vvv...>>v....>...v.v.....v.>vv..v.v.>>.....v>>....v>.......v..vv>.v>
vv.v.v.>.>.v.>vv>>..>>>>vvv.>.>>.v>.>v>..>vv..>v..v.......v...>.v>...>.v.vv>v..>v...v.>v.vv>.v..vv.vv>.>......>>.>..v.v....>....>.>....>v.>
>>>...v>>.>......>..v.v>>.>.vv..v>...>.v>>..v.>>..>>..v......v>.v..>>..vv....>...>v.vvv..>..v....>>v....>v>.v.vv.v>.>.>v...v.v.vv.>>.vv>..>
v>.v.>...v>>>v>.v..>v...v>vv>>v.v.v.>vv..v..>v.v..>..>>..>v>..v....>.>......v>....>v..>>vv.v>>v........>>.>>vv..v>..>vv..v.v.>.>>..>....v.v
>.>.v>.vvv.....v.>..v..>.>...v.>.>....vv...>.v.....>..v.......>vv>>..vv..>..v..vv.>.>>..v..>....v...>.>.v.>.>....>..v.vv>...v>>.>...>..>.>.
>.>>.>v>v>>>>.>.>>>>.>>...vv....>>..>.vv>>.v.>..v.v....>.>v..>>...v..v.>>>>...>>>.v.>.v.v>....v>.v..>v..>.v..>.v>v..>>.....v.>....vv.>..>>.
>.v..>v.vvv>.v.>>.v..v..v..>>.>..v.vv.>..>>>.v.v>....>.>.vv>v>.>v>.>.>.v>v..>.v....>>v...>>>.>v.v.>.>.>.vv..>....>vv.>>...vv.>.v...>>.v..v.
..>.v..>v>v>>>>.v.>>.>......vv......>.>>>.>.>v.>>>v>>v..v>v.v.v.>.>vv.v..vv.v>vvv>.vv>v>v...>...vvv>>v.>.vv>vv.v....v..>v>>..>>..v....v.v>.
..v>..v>..>.>.v.>.>>>v>>v.vv..>>v.>v>.v>v.v>..v..v.>>>>.v>.....v.....v..v>..vvv>....>v.>>.v..v....v>vvvv>.vvv>..>>.v.vv>.>..v>...>.v>>>.>>.
v>.v.v.>>v>v..vv....>...>>...>>v>.>.vv..>.>>..>>....v>.>>v>>>>vv>v>v.>..v>.v......v....>.v.v....v.>v>.....>..v.v....v...v>v>.>vv.v>>v.>...v
.v>v..>>v>.>v>...v>..>.vv..>>v>>..vvv>>v.>.v>..v...>.>..vv.>.vv>v.v...v>v>..vv...>v>....v.>v...>...>>.vv..>v.v>>..v...v..>.vvvv>.v..>..>..v
>>..v>..vv>.>v>v.vv>.>vv.>v>>>v.v>v>.>.>....v>>...>>..vv.>...>>vv>v>>v>>>>>....v>.>v..v..>..>>v..>...v...v.>..>>v.....>.>.v...v...v.v.>vvvv
.>>.>vvvv..v.>....>.>vv..>>.v..>.vv....v........>>vv...v.>v.v.>..v.>v.>v.....>.>.v>.>.v..v..v..v>.v>v....>.>..v>..>>..v...>vv>...>>>.>..vv.
.>.vvvv.>v.>v.v..>..v..v..>vv>vv..>>>>>>v.v.v>.>>...>v....vv...>.>.>.v>.>>..v.>v>.vv.v...>...>>..vvvvv..v>..v.....vvv.>>>v>.v>v........v>..
vv>...v>vv.v.v..v>vv.v..v>.v....v.v...v...>v...>...v...v.>.v....>>vv.v..>>....>.....>>>.v..>v.v>>..>.>...>>v>.>>...>.vvvv..>.vv.vv..v..v.>.
v>.>............>>v..v.>>>.>>vv.>.>v.>>>>.>vv....vvv>.>.v>v>.>.....>..>...>>vv>..>v.>>vv>...vv.>>>.>...>..v.v.>vv...v.v>v...v..>.>..>>..>.>
......>.>...vv.>...v.vv.v....v.>..>>v....>vvv>........v.vv>v>>..>..>>...>....>..vvvv.>...>>.v.v...v>..v.v..vv>.v...>>...v.vv.>..v.>vvvv>..>
.>.v..v..v>...>>...>.>>v..>v.v.......v>>v.v..>.v...v>>>v.v>.>.v>.>>...>>v>v>v>.....v..v.v.>vv>vv>vv.>>>>.......v...>v>..vvv>..>..v..v....>.
>>.>v...v.>v....>>..vv..>v>v.>>v.>>>.>v.>.v>........vvv>>vv...v.v.>...>>>.vv.v....>>.vv>>......>v...>vv.>>....v>....>>>..vvv..v.v>v.>v.>..>
v>vvvv....>>v>>......>>.>.v.>....v>.vv.v>>>v>..>>v.v>.>>v>v>...>>.>>v>v>v>v.......v>>....>>.v..>>.v>v...v....>v..v.vv>.>v...vv>...vv>.v>v.>
>>>.>v>vv.v.vv.>.>....v>.>.vv...vv..>v.v>..v>>>>v..vvv.vvv.vvv..>v>.>.v>........v.>....>.v..>.v.v.>...v....>>v....>vv>>>.>v.>>v.vv.>>..>>..
vv>..v...>v.vvv.v>...v..>>>.>...v..>v...>v>..v>..v...>>>.v...>>>.>>v>>...v.>v..v>>.v>>>>..>..>>>.vv>>..>...v..v..v.v..v....v...vv...v>..>..
.>v..v..>..>.>>>..>..>.>v.vv....>>v.v>>>.>v>.vv>vv>v.v.v.v>.v....>.>v.>..>v>.vvv>v.>.>v>>>....>..vv..>>>.>>...>..v.>>>>.v>>.v.>v>...>..>>.>
>>..v...v..v.v....v..>...v..v>>.....v.>..>...>....vvvv>..v>vv.>.>.vv.vv.>.v>v>v..>v...vv....>...v....>v.vv.v>.v.vvv..v..v.>v..v....v>>>v>..
>..v....>v>.vv>.>.vv.v....v>..>.v>.v>.v>>.v..v.v..>.v>.v.vv.......v..v>.>.v>.>v.>.>...v>v>.v..v>..v.v>.v.v>vv....v..vv..>.v.v.vvv.>.v..>...
vv>>..>vv>.>.v....v.>..v.vvvv.v>....v.v>.....>>.>.>>v>>..vv.v.>>>.>v..v>vv..>>.vvv.>.>>vv.>.v.>.v>...>...v.v>>>>vv.>>>.>..v.>.>>.>..vv.v...
>.>..>v..v...>...>.>.vv.vv>.>v.>..v.>.>.>.v...vv..>.....vvv.v>v..>v>v.v>>>..>.>>v.>...v..>.>..>>.v.....v>>...v..>>>.v..>.>vvv>.v..v.>....vv
>vv.vv..vv..>v...v>..v.v.>>vv.v.>v.v.....v>..>v>.>.v.vv.vv>v..>.vv>v.v>.vvv>>v.v..>..v>vv..>.>vv.>vv>>...>.>v.>....>v>..v..v..>>>v.>.v.vvv>
>..v.v.>v.>>vv.>...vv>v>..>v.v>.>v.....>>...v.>vv>v>...v>>...v.v....>..>vv.vv.v.>>.>vv>v>>v..>v.vvvv.v.v.>>.>..v.v>.>>...>v..>v>vv>.>v>.>..
..v....>vv.>>>vv>...>v.>>..v>>>>v..v...v.>vv>...vv..v.v>vv....vv.>...v>>..>v>.>..vvvv>......v..vv>vv.v..vv>.>>vv.>vv....vvv>.v.v.>>v...>.vv
>>..>>....>.>......v.v.>...>v...>v.vv>..>.v>...vv.v>.>..v..>>.vvv.>v...v.>>v>.>..v..v..v...>..v..>.v.>vv>>.vvv>vvvv.vv..>v....v>..>.v.vvvv>
..>..v..v.>.v>>..>>>.>v>v.>...v>.>.v.vv>vv.>..>>>.>v>.v....>.>v>...>.vv.>vv...v>>.....v..>......>.v...v>.vvvv..>.v...>v..>>>..>..>>.>.>>v.v
....>..>vv.v.>..v>..v>v>>.vv.vvv.>...v>.......>v.vvvv....v>.vvv.vv.v....v..>.>..>>.......v.v..v.vv>>vv.>...vv.>......>v.v>>>.....>vvv..>v.>
>.v>...v>v>v..vvv>v.>.vv.vvv>>>.v.>v>>v>.v...>..vv>v>v.>.>..v>v>.vv.>v.v>.>vv>v.>..>.>.v.>>.vv...>>>.vvvv>>v>..>v>>.vv.>>...>v.v>>.>.......
.......v.>v.>>v>.v..>..>v.vvv>v.v.vv.v>.>.>>v>..>.>....>...>.......>...>..>....>..vv.v>.>....>>>.>v.v...v.>..>vvv>..v...v>..v...>v>.v..v.vv
.v.v>..>..v.>vvvv.v.....v.....>.>....v.>v.>v>..v>.......v>>v..>.v.v..v..v.>>.>>.vv.>v.v..v.....v..>>v...v.v>....v..>v.>..>>...>v.>>>v.>v...
v...>.v....v>.>.....>v.v.v...v......vv>.vv>...>v.v>.>.v...v...vv>v.v..vv.v.>.>v>.vv.v.>.>.v....>...v..>.>>...>vvv.v.>.>>..>.v>>.v..v.>>....
>v...>>.v>.v>>..>..v.>>....v>>v.v.......>>.v.v........v...vvv.>v>>.v..vv>..vv.>>v..v>v>..v.vv>...vv.>v.>>....>.>.>.v.vv>.v>v>v.v>>.....v>>v
..>v>vv..v.>v..>v.>v..vv.>vv.v>.vv.>.>>vvv..>>>v>..>.v.v>vvv..v....vv.....>v.>.>>v.v>..>v>v....vvvv>v.v.v>.>..v.v>.>v.v>>v>...>.>.>v...>.v>
....>v....>..vv..v>..>.>v....v..v>..>>>vvv>.>.v>>>.v..>...v.>v.v..>...v>vvv>....>v>v>v>v......>>.v....vv.>..>v.v>>vv...>..v.>..>..>>.>>v>vv
.>>...>.v>...>.>>..>v..>..>.>..v>>..v.v.>..>v..v..vv...v>>.>v.v.v>>>v>..v..>vv.v...v..>v...vv....>>v.v......v..v..>.v>..v>.>..v..>..>v.>>..
.........v>....>.>.v.......>....v>vv...vvv...>v.v>..vvvv....v>v.>v..>......v.v>v>vv>v>.v>.>...vv.>.>>....v...v>vvv...>..>...vv..>>v>v.v>v>v
..>...>......>vv...>v.v>vv.v..v>..>>>>.v.v.....vv>>>v..>....>>...v>>.vv.......>..>>v.v>>v.vv>.>.....>..v..v.>...v..>vv.>>v.v.vvv>..>...>>v>
vvv.vv.vvvv>.v.v>vvv...v.>..>....v....v>v...v....>>vv>>vv..>.v..>>>v>.vv.>vv.v.v...>.>..>.v..v>vv....v>>.>.v>.vv>>>>>>..>..v..>..v>.v......
v.>v.v...vv>v>>.>.v.>>vv>....v.>.....>vv>v>vv.v>..vv.v..>v.>.v.>v.v>..>..v>>>>.>.......v>.>.v...>..vv.v>v..>v>.v>.vvv.>vv>..>.v.>...v>.....
>.vvvv.v>.v..v...v...v..>.>..>>..v>>...vv....v.v....>>>.>v..v..>...v.>.vv.>.....>vv..>..v..>.v.>..v.>.>>.v>v>>.>v>.v.v>.v..v>>v.v>.vv>.v.v.
>.>......>.>v.vv.>...vv.>...>v.v>>>.v>vv>.>>.>vv.v>.v>>>....>.....v.v..>...>v>.v.v..v>.v..>>>..v>vv...v.v.v.>vv.v>v.>...vvv..vv>.>v.v....>.
v.>.>.>.v.v.>.>....>.v..>....>v..v.v.>.v.>vv......v.>>>>v.vv....vv>..v>.>.>.>>v.v>.>.>vvvv.>v>.v>..v.v.v..>>...vv>>.....v...>....v>.>.>.>v>
>>v...>..>>.v>.>..>vv..v.>>>>.>>>v.>.v..>...>..>...vv.vv..v>>>>>.>..>...v>..>.v>>>.....v..vv..>..>>>>..v.vv.v>vv...>.v..>.v>..v>..>...>>v>v
.>.v>v>>.>.>....v.....vv>v.>..v>v..v..>..v.v>>....vv>..v.v.>v>...v......>..v..>.>>v>v>v......v..vv...v.vv>.v..>.v>v>>>..v...v>v.>v.>v>..>>.
v..>>.>...vvv...>>.>vv..>>v>..v>...vvv..>v..v.v..vv>.>...>v...>vv.v>>>vvv.v>.v.v>>v.>.v>..v....v....v..>.>v....>.v......vv.>v.v..>>vv.>.>>.
..v>.>.v.....vvv>v.v..v..>>v..>>..>v.v>>..vvvv>.>..v>v.v>v...v.....v..v>.>.v....vv..v..v.....v.>..>..v....vv..>.>>>..>.vvvv.......>.>>...v>
vv.vvv.v>v...>v>.>v.>v...>...>v.>vv..v...vv>.>v.>>vvv......vvv.>.v>..>.v.vv.>.>.v..vv..v>.>v>v.>v>v.>v..v.>>.>.>>v..vvv>>v......v>v.>..>..v
v>...v..>..>vv..>...>.v.v>v>..>..>.>....>>........>.>.>..>......vvv>>..>v>v>.......vv.v.v.>v>>..v..v.>.vvv>..>>v>...vv>vv....vv...>..v...v.
..>v.vv.v>..>>..>.>.v>.>>...>.>...v>..v>v>..vv..>v>.v.v.>.>>...v...>...>..>>>v.>v.>v.v..>...v>..>....>>.>.v..>.....>v..>.....v.vv.vv.vv.>..
>.....>>..>..v..>>....v>..vv.v..v>>...>.v.v>>vv>.>v>v>...>>.>v.>.vv>v>.v>v.>>v...>v>.>...vvv..v...>>....v..>.>v.v>..v..v...v...v.>>>>..vvv.
v>..>v.v.>>v>..v>.>.>vv>.>>v>.v>v.>.v>>......>v.v..>.>>...vv>vv.......v.vv>.>>>.v>vv>v..>.>..v...>..>>.>v..v....>>v>.v..v.>.v.....>.v..v...
vv.>v.v.>>vv>..v..>v.v....vv>.v.v>.>...v......>.vv.v.vvv.>v.>>.>...>>v....v>v>>.v>>..>.>>>..>>.vv>...>...v.>v..v.v.>>.>>v....>..>>.v.>>vv>.
.v..vv>...vvv...>v>v.>vv>>>>v..>>..v.v>v>>v>v.....v>..>>v>...>vvv.>vv.v>v.v.v.v>..v.v.v.>>.>...v.>v.>v.>..v.>v...>>.....>.>...vv>.v.>>>v..v
....v.>.vvvv.v>..vv>>.>.v.>>v..>v>.>>v......v>>vv....>....>>...>v.>>>>v>.v...>.>..vv>>.v>vv>.>v.>v.v.>.>.v....>>>.vvv...>.>..v.>>>.vv..>.>v
v>..>.vv>v....>v.>...>.>vv..>>....>vv.>.>v.>..v..v....>..v>.vv>..>.v.>.>v.....>.v>>.v>>..v.>.>.>....>v....v.v...>.v......>.>...>>>.>.>>.>v>
.>....vv>....>>....>.>.v....>..>v>.v>>..>...>>.>.>>vv>....>>....>.v...vv.v...>.>.v.vvv.v>...>vv>......vv>.vv.>....vv>.......v.>.v..>..v.>..
.>>.>.v....>>.>vv.vv>v>>.v.vv>.....>.>>>.>....v...vvv.>..>>v>vvvv>.v..>v>.>>.v.>>.....>.>>.v.v.>v..v.v....>vv..>.v..v>.vv.v>.v>.>v>......v.
>.vv.vv.vv.vv>......>>.v>.......>v>>..vv.v..v..vv>>.v>.>v.v>...>v.>>..v>>..>>v>...v>..v.v.v>>v.v>>>.>..>.....>.>.>.v.>>>..v.v..>v.>vv.v..>.
.>vv>>.>.>..>.....v..>>.vvvv.v>>>..>>...>>>>>vv>.....vvvv>>>..v.>v..v..>v.>...>>.>......v.>........v.>>v.v.v...v..>.v.v>>>....vv>>.>vv>.v>v
.>vvv.v..v.v.>.>.....>.v....>vv>...v.v...>....v..........v>>>....v.........>v.>v....>vv>v.v>...v>.>.....>.>...vv..>v>>.>>.vv..>.>>....v>v>.
.>..>...>.v.>v>.>..vv.>v......vv...>.>>..v.v>.>v.v>...>>.>.>v>.>.>.>.>..>v.vv.>>>..>>..>.v>v.>vv.>>v.v>v>>vv>>.v...>v>vvv..v..>>>..vv>.v...
>v>>vvv>.......v>.>.>.v>v.v.>...vv..>..>.>>v>>..v....v.>>vvv..v.>v.>>>.vvv>..>>.vvv.vv..>>v...>>vv....>>.vv.v.>.>>.v..>>>vvv.vvvvvv.v>>>.v.
.....v.>>v..v....>..v..v.>...>...>..>vv......v....>v...v>..v>v..v>..>>vv.vv>v>v>..v...v..v.>v...v.v..>v...>.v..>.v>>v>v..v.v>v.>.>.>v.vv...
.v>.v.>>..v>v>vv...v>.>>.v..>.vv...>.>v..>.v...>...vv>v>.v..v.>..v>>.....vv.>......>.>..>.v>.>.v>..>v>>..>.>vv.v>.v.>vvv.v>v..>.>>>v>.>v.v.
>.>....>..>..v.v.>v..v...>v>v..v>>.v.vv..v..vv>.>v>......>...v>......>...>vv>...v>.>.>vv.>>..>........>.v>>.>..>.....v>.>.v.>v>.>v.>.v>vv>.
>vv.>>.v.>>..v>.>..>vvv.>..>vv.v....v>.vv.>>.v>>.v....vv.vv>.v>...>.>>..v...v..vv..>.v....v..>.v..v.>v>.v.>.v...>v.>>>....>>..v.v.vv..>vv..
.v..vv.>.>..>v>.v..>........v.>.>.>..>vvv.>v>>v.>.>>>......>v......>v...v>v.v..>v.>...v>.>.>>v>v.....v..>.>.v......>....v>v>v.>>.>>.vvvvv..
>>v>vv..>..........>...vv>vvv>>vv..>v.v>.v>.>.>>..>..>.v.>v.v..v.>vv.vvv.>vv...>..v>>v.vv.v>..v>>vv..vv>.>....v.vvvv>..v>v>..v>..v...>>v>v.
v....v....v..>>>>...>v>..>.>v..>.vvv>.>.>>.>v.vv>..vv.>...>>.>.v...v...>>>..>v>.>vv..v..v.v>..>.v>..v>v.>v...v>>.v.>vvvv>>.....>vvv>..>vv.>
...>>v..>..>>>vv>.>v>..>>>.....vvv.v...>...v>.vvvv.v...>.v..v.>..>>>..v.v>.>.......>>>.v>..>....>.v..v.>.vv>..v>>.v>.v>.>....v>.vv.>....v>.
..v...v.>.v....v>>..vv>vv........>>...vv.>.>>>.>>>.v..>v>.......v...>vv.v.v..v.>v>vv>..v>>>...vvv.v>vv>..>v>v..>.v>..>>....>..v...v>.>.v.v>
>...>v..>.vv>>..>.v>........>....v.>..>>...v.>.>vvv..v....vvv...v.v....>..>>>.>vvv..v>vv>>..>.v....>..>vvv>....vv>....>...>.....>v.>...>...
.vv.>v>vv>v.>v>..v.>....>..>....v...>...>>.>.v.v.vvv>..v>>.>>...>...v.vv..vv>.>v.>>.....>..>>.>>v.v>v>>vvv>.>v>>>v......v>>.v>.v...>>.>..v>
.v...vv...v>..>...>.>.>v..v..v.>.v>v>.........v.vv....v.vv..v>..vv>v.>.vv.>.v.v>>....>.vv.>>..v>..v>v..v...v>.v.v.vv.vv>v...>>.>>>v>>...vvv
..>v>.v>>.>v>....v>.vv....>v..v.>.vv>v>>>vv>.>>v...>>..>.>..>..v.>.>>.v.>>.>>>>>.vv..>>...v.....v......vv>>.>v.....vv..>........>.>v>v.>.>.
.v>.v.v..>vv.>.v..v.v..vvv.>v>vv..>>>.>.>.vv.......v>v...v.>>>>v.v....>.vv>v..>v..>.v...>v..>..v..v...>.v....>.v.v>vv..v.vv...>.>>>vv..>vvv
.v..v...vvv....v>..>.>vv....>..>v.>>v>v..>...v>.>.>..>......>...v>.vv>>>>v....>>vv..v...v..>.v>.>..vv>.>.>..v>.vvv..v...>..>>v>v.>..>v.v...
.v>.>..>v.>.v>vv.>..v>v.......v>>.>.>..>.v.....>v.v...>>.v>..>....vv>v.......>.vv..>..>...vv..vv>v>..vv>v.>v.>>.v.......v....>..>.v.>>.vv..
v>v>v>...v.>...>>..v.v...........>v..>>v.>>>vv........v.>v>.>..>>..>..>...>..v>.>...>...v.>>v>..>.>.>v...vv.v>vvv...v.v.......>v>v.v..v..>.
v>.....v.vv>.>>vv.v>v>vv...>v>.v....vv.v.>v...v.>..v>.>>.v>....>...>>vv...>.>.>..v....v>.>.>v...>v.v.v>.>>..v>vv.>>vv>.>.v..>..v>v...vvvv>.
>...v.>>.>>>>.>..>>>.>v>.vv>..vvvvv...v...>v>.>..v..>.vv..v>>.v.>v..v.v.v>.>.v.>>>v.v.>.....>v..v>.>....>v.>....v...>.....v.v>..>..........
v..v>...v.>.vv.v..v.v>..>>>v>..>.>v..v>v..vv.>>.>vv>.>>..v>v>vv..>.>>>>.>.v>>>.>>v..v.v.v..>.v.>...>v..>>.v>.>...>.v>..>vv....v....>.v..v..
v>.>v>..>..v......v>...>>>v>.>>..v...>.>....v.v...>>....>....v...vvv.>...v>..>.>..>>..vv.v...vv>v..v.>.v.....>>.>..vv.v.vv.>..>.>...>.>>>.>
>...v........v.v...v>.v>v>>v>...>>.>>..vvv>v....v.>>>>vv>.v..v.v>........vv>.v.>........>.v.>.>>>>v....>>vv.v>.>>>.v.>vvvv.>>v>.....>.>v>.v
....v..v>v.>v.vvv>...>..v.>v>>vv.>>..vv>vv...vv>>>.>vv.>v....>.v.v..>.>.v.>..v.>v.>>..v.>...v.v>>vv.>>....vv..>.>.>..>>.v.>.>v..>......vv..
v....>>vvvvvv>.vv>v>......>vv...vv>...v>.>>..v...>.v>vv..v>.v...vv>.>v..v...>vv>.....v..>v.>>.>>v.v.v.v.>.v....v.v.>>......>>>v...vv..>..v.
>>...v.vv>.....v>.>.>v..>..v..>v.v.v.vv.>v.v.>v...v...>...vvv...>>>.....>.vvv>.v>.>>>v>..v>.vv.>.v>..v>v.>v.v.v>.v...>vvv.....v.>....v>..>.
>>..vv...>v.>.>..v>.>>.vvvvv>vvv..vv.v.vvv.v.vvv.>>>>>v....>>v>...vv..vv>>.v......>.v>.>..>>.vv>..v.>v>...v>v>>.>v>.v....v>..vv>.>.....vvv>
>....v>....v...>>vv..>....>...v>>.>>.v.v>...>>.>.v..>..v.v...v..>v...>.....>v.vv..>v.......>vvv...vv....>vv...>v>>...>.....vvvv..>v>v..v.vv
.>.>v>>v>>..>.>>..v.>...v..v..vv.v.vv>v>..>.>.......vv.v>......vvvv>>....>v.v..>.......v..vv>>.v>.>..>.>.v..>......v>.v.....>>v>>.>vvv..v>>
..>v.>.vvv..>.>vv.>v....>>.>v>.v.>...v.>..>...v...vvv.>..v.>>vvvvv......v..>.v>>.v.>vv>.>v...>>v>...>>>>v..>>.vv..v..v..vv.v......>v..v...>
>....>vv>.>v.>.v.v..v.v>..>....v>vv>v.>>v....v.>>>..vv>>>..>..v>v...>...>.v>.vvv.v.....>>.>.v>...>.>>vvv>vvv>.v.....v.>...v>..v..>>>...v...
.>>....>>..>>>.>v.v.....>>>v.v>v.vvv.vv>vv.v..>.v..v.>v.v>.v.>>>v.>vv>v..>>.v>.....vv.vv..>..>v.v....vv..>>...>>>>..v>v>.v>........vv..v...
..v.>>>..v...>..>>v.v.>..vv........vvv>>.>v>>.>.vv>.......v>>v.v..v>..v.>.v.>...>...>>>.v.>>.v.>..v>v>.>>v.>...vv>>>.....v.v>.>.v....>>..>.
.>..>..v>..>..v..>>vv.v>v...v..>v>.>v>....>....v..>v.vv.>..........vvv.v.vvv...vv.>>..v>>v.>.....>v>vv...v>.....>>.>.>v.v..vv...v>......v..
v...>v.v.>.>.vv>.>.....v>...>...v.v>v.v>.>.>vv.>.v.vv>v.>>v>.v.v>v....>..v>v..>..v...v>..>.>.v>v.>.>.>v.>v.>>.>..>.>.v..>v.vv.v>>.v>.>..>..
>.>>.>v>>.v>v.>.>v>vv>.>.>>......>>>...>.v.>..v..v.>....v>v>>>v..>..v..>.........>.......v>>v>.>>.>....v.>v>v.vv....>.v....vv.vvv.v>..>>...
>....v>>>...v.v..>.>v.....>.>>v>.v.>>vv>.v.>..v.>.vv>..>.>>>v.v...vvv..........v>>v.v>>>..v..v>..vv.........v>.v>....>v.>.>>.v.>v...v>...vv
.v.v..v>v>v..>v.vv.v>vvvvv>.v>>>v....>>>>...vv.>...>>..v.v..vv.>vv>.>.>..v>.>...v...v..>>>..>..>.v>vv.v..>>....v.v.>.>..vv...v..vv.>.>>v...
v>...vvvv>.>v>>>.v>......>..>>...>.>...v>...vv..v.vv.v.v....>...v>..v.>v.v........>.>v....v.v.>..v>.vv.vv.>.>>..vv...>..>.vvv>.vv...>.>>..>"""
inp2 = """..........
.>v....v..
.......>..
.........."""
inp3 = """v...>>.vv>
.vv>>.vv..
>>.>v>...v
>>v>>.>.v.
v>v.vv.v..
>.>>..v...
.vv..>.>v.
v.v..>>v.v
....v..v.>"""

def parse_input(inp):
    rows = inp.split()
    cucus = {(c=='>', row_id, c_id) for row_id, row in enumerate(rows) for c_id, c in enumerate(row) if c in {'>', 'v'}}
    return cucus, len(rows), len(rows[0])

def next_pos(cucu, coords):
    t, x, y = cucu
    if t:
        nx, ny = (x, y+1 if y+1<M else 0)
    else:
        nx, ny = (x+1 if x+1<N else 0, y)
    return (t, nx, ny) if (nx, ny) not in coords else (t, x, y)

def step(cucus):
    coords = {(x, y) for _t, x, y in cucus}
    cucus_east = {(t, x, y) for t, x, y in cucus if t}
    cucus_south = {(t, x, y) for t, x, y in cucus if not t}
    cucus_east = {next_pos(c, coords) for c in cucus_east}
    coords = {(x, y) for _t, x, y in cucus_east | cucus_south}
    cucus_south = {next_pos(c, coords) for c in cucus_south}
    return cucus_east | cucus_south

def part1(cucus, i):
    new_cucus = step(cucus)
    if new_cucus == cucus:
        return i
    return part1(new_cucus, i+1)

cucumbers, N, M = parse_input(inp)
print(part1(cucumbers, 1))
